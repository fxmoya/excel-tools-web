{% extends "base.html" %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header bg-warning text-dark">
                <h4 class="mb-0">üîê CAMBIAR CONTRASE√ëA</h4>
            </div>
            <div class="card-body">
                <p class="card-text">
                    Modifique la contrase√±a de seguridad para acceder a las herramientas.
                    Mantenga sus procesos seguros y protegidos.
                </p>

                <form method="POST" id="passwordForm">
                    <div class="mb-3">
                        <label for="password_actual" class="form-label">Contrase√±a Actual:</label>
                        <input type="password" class="form-control" id="password_actual" name="password_actual"
                               required>
                    </div>

                    <div class="mb-3">
                        <label for="nueva_password" class="form-label">Nueva Contrase√±a:</label>
                        <input type="password" class="form-control" id="nueva_password" name="nueva_password" required
                               minlength="4" placeholder="M√≠nimo 4 caracteres">
                        <div class="form-text">La contrase√±a debe tener al menos 4 caracteres.</div>
                    </div>

                    <div class="mb-3">
                        <label for="confirmar_password" class="form-label">Confirmar Nueva Contrase√±a:</label>
                        <input type="password" class="form-control" id="confirmar_password" name="confirmar_password"
                               required>
                    </div>

                    <div class="d-grid gap-2">
                        <button type="submit" class="btn btn-warning btn-lg">
                            üîÑ CAMBIAR CONTRASE√ëA
                        </button>
                        <a href="{{ url_for('index') }}" class="btn btn-outline-secondary">
                            ‚Ü©Ô∏è CANCELAR
                        </a>
                    </div>
                </form>
            </div>
        </div>

        <!-- Tarjeta de informaci√≥n de seguridad -->
        <div class="card mt-4">
            <div class="card-header bg-info text-white">
                <h6 class="mb-0">üìã Recomendaciones de Seguridad</h6>
            </div>
            <div class="card-body">
                <ul class="list-unstyled small">
                    <li>‚úÖ Use una contrase√±a de al menos 8 caracteres</li>
                    <li>‚úÖ Combine letras, n√∫meros y s√≠mbolos</li>
                    <li>‚úÖ No use informaci√≥n personal f√°cil de adivinar</li>
                    <li>‚úÖ Cambie su contrase√±a regularmente</li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const form = document.getElementById('passwordForm');
        const nuevaPassword = document.getElementById('nueva_password');
        const confirmarPassword = document.getElementById('confirmar_password');

        // Validar que las contrase√±as coincidan
        form.addEventListener('submit', function (event) {
            if (nuevaPassword.value !== confirmarPassword.value) {
                event.preventDefault();
                alert('‚ùå Las contrase√±as no coinciden. Por favor, verifique.');
                confirmarPassword.focus();
            }

            if (nuevaPassword.value.length < 4) {
                event.preventDefault();
                alert('‚ùå La contrase√±a debe tener al menos 4 caracteres.');
                nuevaPassword.focus();
            }
        });
    });
</script>
{% endblock %}